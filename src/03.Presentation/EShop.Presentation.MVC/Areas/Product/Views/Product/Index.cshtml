@using EShop.Presentation.MVC.Areas.Product.Models
@model ProductDetailViewModel
@{
    ViewData["Title"] = "جزئیات محصول";
    Layout = "~/Views/Shared/_Layout.cshtml";

    // Placeholder
    var productId = ViewBag.ProductId as int? ?? 1;
}

<div class="row g-4">
    <div class="col-12 col-lg-5">
        <div class="card">
            <img class="card-img-top" style="height:360px;object-fit:cover"
                 src="@(Model.Product.ImageUrl ?? $"https://picsum.photos/seed/detail@productId/900/700")" alt="@Model.Product.Title" />
        </div>
    </div>

    <div class="col-12 col-lg-7">
        <h4 class="mb-1">محصول: @Model.Product.Title </h4>
        <div class="text-muted mb-3">دسته‌بندی: @Model.Product.CategoryName</div>

        <div class="fs-4 fw-bold mb-3">قیمت: @Model.Product.Price</div>

        <div class="alert alert-info">
            موجودی: <strong>@Model.Product.Stock</strong> عدد
        </div>

        <p class="text-muted">
            @Model.Product.Description
        </p>

        
            <div class="col-12 col-sm-8">
                <form asp-area="Product" asp-controller="AddToBasket" asp-action="Add" method="post" class="m-0">
                    <input type="hidden" asp-for="BasketItem.ProductId" value="@Model.Product.Id" />
                    <input type="number" asp-for="BasketItem.Quantity" class="form-control" value="1" min="1" />
                    <input type="hidden" asp-for="BasketItem.UnitPrice" value="@Model.Product.Price" />
                    <input type="hidden" asp-for="BasketItem.Title" value="@Model.Product.Title" />
                    <button type="submit" class="btn btn-dark btn-sm">افزودن به سبد</button>
                </form>
          

        <div class="mt-3">
            <a asp-area="" asp-controller="Home" asp-action="Index" class="btn btn-outline-secondary">بازگشت</a>
            <a   asp-area="Product" asp-controller="AddToBasket" asp-action="Index" class="btn btn-outline-dark"> رفتن به سبد خرید</a>
        </div>
    </div>
</div>